.class public Lorg/inaturalist/android/AnalyticsClient;
.super Ljava/lang/Object;
.source "AnalyticsClient.java"


# static fields
.field public static final EVENT_NAME_APP_LAUNCH:Ljava/lang/String; = "AppLaunch"

.field public static final EVENT_NAME_CREATE_ACCOUNT:Ljava/lang/String; = "Create Account"

.field public static final EVENT_NAME_EXPLORE_MAP:Ljava/lang/String; = "Explore - Map"

.field public static final EVENT_NAME_EXPLORE_SEARCH_CRITTERS:Ljava/lang/String; = "Explore - Search - Critters"

.field public static final EVENT_NAME_EXPLORE_SEARCH_MINE:Ljava/lang/String; = "Explore - Search - Mine"

.field public static final EVENT_NAME_EXPLORE_SEARCH_NEAR_ME:Ljava/lang/String; = "Explore - Search - Near Me"

.field public static final EVENT_NAME_EXPLORE_SEARCH_PEOPLE:Ljava/lang/String; = "Explore - Search - People"

.field public static final EVENT_NAME_EXPLORE_SEARCH_PLACES:Ljava/lang/String; = "Explore - Search - Places"

.field public static final EVENT_NAME_EXPLORE_SEARCH_PROJECTS:Ljava/lang/String; = "Explore - Search - Projects"

.field public static final EVENT_NAME_FORGOT_PASSWORD:Ljava/lang/String; = "Forgot Password"

.field public static final EVENT_NAME_GUIDE_DOWNLOAD_COMPLETE:Ljava/lang/String; = "Guide Download - Complete"

.field public static final EVENT_NAME_GUIDE_DOWNLOAD_DELETE:Ljava/lang/String; = "Guide Download - Delete"

.field public static final EVENT_NAME_GUIDE_DOWNLOAD_START:Ljava/lang/String; = "Guide Download - Start"

.field public static final EVENT_NAME_LOGIN:Ljava/lang/String; = "Login"

.field public static final EVENT_NAME_LOGIN_FAILED:Ljava/lang/String; = "Login Failed"

.field public static final EVENT_NAME_LOGOUT:Ljava/lang/String; = "Logout"

.field public static final EVENT_NAME_ME:Ljava/lang/String; = "Me"

.field public static final EVENT_NAME_MENU:Ljava/lang/String; = "Menu"

.field public static final EVENT_NAME_MISSIONS:Ljava/lang/String; = "Missions"

.field public static final EVENT_NAME_MISSIONS_CATEGORY:Ljava/lang/String; = "Missions - Category %s"

.field public static final EVENT_NAME_MISSIONS_CATEGORY_ALL:Ljava/lang/String; = "Missions - Category All"

.field public static final EVENT_NAME_MISSIONS_OBSERVE:Ljava/lang/String; = "Missions - Observe"

.field public static final EVENT_NAME_MISSIONS_ONBOARDING:Ljava/lang/String; = "Missions - Onboarding"

.field public static final EVENT_NAME_MISSION_DETAILS:Ljava/lang/String; = "Missions - View Detail"

.field public static final EVENT_NAME_NAVIGATE_OBS_DETAILS:Ljava/lang/String; = "Navigate - Observations - Details"

.field public static final EVENT_NAME_NEARBY_MISSION:Ljava/lang/String; = "Missions - Tap - Nearby Mission"

.field public static final EVENT_NAME_NEARBY_OBS_FROM_MISSION:Ljava/lang/String; = "Missions - Tap - Nearby Observation"

.field public static final EVENT_NAME_NEARBY_WIKI_ARTICLE_FROM_MISSION:Ljava/lang/String; = "Missions - Tap - Wikipedia Article"

.field public static final EVENT_NAME_NEWS_OPEN_ARTICLE:Ljava/lang/String; = "News - Open Article"

.field public static final EVENT_NAME_NEWS_TAP_LINK:Ljava/lang/String; = "News - Tap Link"

.field public static final EVENT_NAME_NEW_OBS_CANCEL:Ljava/lang/String; = "New Obs - Cancel"

.field public static final EVENT_NAME_NEW_OBS_LIBRARY_PICKED:Ljava/lang/String; = "New Obs - Library Picked"

.field public static final EVENT_NAME_NEW_OBS_LIBRARY_START:Ljava/lang/String; = "New Obs - Library Start"

.field public static final EVENT_NAME_NEW_OBS_NO_PHOTO:Ljava/lang/String; = "New Obs - No Photo"

.field public static final EVENT_NAME_NEW_OBS_SAVE:Ljava/lang/String; = "New Obs - Save New Observation"

.field public static final EVENT_NAME_NEW_OBS_SHUTTER:Ljava/lang/String; = "New Obs - Shutter"

.field public static final EVENT_NAME_NEW_OBS_START:Ljava/lang/String; = "New Obs - Start"

.field public static final EVENT_NAME_OBS_ADD_ID:Ljava/lang/String; = "Obs - Add Identification"

.field public static final EVENT_NAME_OBS_ADD_PHOTO:Ljava/lang/String; = "Obs - Add Photo"

.field public static final EVENT_NAME_OBS_CAPTIVE_CHANGED:Ljava/lang/String; = "Obs - Captive Changed"

.field public static final EVENT_NAME_OBS_DATE_CHANGED:Ljava/lang/String; = "Obs - Date Changed"

.field public static final EVENT_NAME_OBS_DELETE:Ljava/lang/String; = "Obs - Delete"

.field public static final EVENT_NAME_OBS_DELETE_PHOTO:Ljava/lang/String; = "Obs - Delete Photo"

.field public static final EVENT_NAME_OBS_FAVE:Ljava/lang/String; = "Obs - Fave"

.field public static final EVENT_NAME_OBS_GEOPRIVACY_CHANGED:Ljava/lang/String; = "Obs - Geoprivacy Changed"

.field public static final EVENT_NAME_OBS_LOCATION_CHANGED:Ljava/lang/String; = "Obs - Location Changed"

.field public static final EVENT_NAME_OBS_NEW_DEFAULT_PHOTO:Ljava/lang/String; = "Obs - New Default Photo"

.field public static final EVENT_NAME_OBS_NOTES_CHANGED:Ljava/lang/String; = "Obs - Notes Changed"

.field public static final EVENT_NAME_OBS_PHOTO_FAILED_TO_LOAD:Ljava/lang/String; = "Obs - Photo Failed to Load"

.field public static final EVENT_NAME_OBS_PROJECTS_CHANGED:Ljava/lang/String; = "Obs - Projects Changed"

.field public static final EVENT_NAME_OBS_SHARE_CANCELLED:Ljava/lang/String; = "Obs - Share Cancelled"

.field public static final EVENT_NAME_OBS_SHARE_FINISHED:Ljava/lang/String; = "Obs - Share Finished"

.field public static final EVENT_NAME_OBS_SHARE_STARTED:Ljava/lang/String; = "Obs - Share Started"

.field public static final EVENT_NAME_OBS_TAXON_CHANGED:Ljava/lang/String; = "Obs - Taxon Changed"

.field public static final EVENT_NAME_OBS_UNFAVE:Ljava/lang/String; = "Obs - Unfave"

.field public static final EVENT_NAME_OBS_VIEW_HIRES_PHOTO:Ljava/lang/String; = "Obs - View Hires Photo"

.field public static final EVENT_NAME_ONBOARDING_CONTRIBUTE:Ljava/lang/String; = "Navigate - Onboarding - Contribute"

.field public static final EVENT_NAME_ONBOARDING_LEARN:Ljava/lang/String; = "Navigate - Onboarding - Learn"

.field public static final EVENT_NAME_ONBOARDING_LOGIN:Ljava/lang/String; = "Navigate - Onboarding - Login"

.field public static final EVENT_NAME_ONBOARDING_LOGIN_ACTION:Ljava/lang/String; = "Onboarding Login Action"

.field public static final EVENT_NAME_ONBOARDING_LOGIN_CANCEL:Ljava/lang/String; = "Onboarding Login Cancel"

.field public static final EVENT_NAME_ONBOARDING_LOGIN_SKIP:Ljava/lang/String; = "Onboarding Login Skip"

.field public static final EVENT_NAME_ONBOARDING_LOGO:Ljava/lang/String; = "Navigate - Onboarding - Logo"

.field public static final EVENT_NAME_ONBOARDING_OBSERVE:Ljava/lang/String; = "Navigate - Onboarding - Observe"

.field public static final EVENT_NAME_ONBOARDING_SHARE:Ljava/lang/String; = "Navigate - Onboarding - Share"

.field public static final EVENT_NAME_ONBOARDING_SKIP:Ljava/lang/String; = "Onboarding Skip"

.field public static final EVENT_NAME_ONBOARDING_VIEW_NEARBY_OBS:Ljava/lang/String; = "Onboarding View Nearby Obs"

.field public static final EVENT_NAME_PARTNER_ALERT_PRESENTED:Ljava/lang/String; = "Partner Alert Presented"

.field public static final EVENT_NAME_PROFILE_PHOTO_CHANGED:Ljava/lang/String; = "Profile Photo Changed"

.field public static final EVENT_NAME_PROFILE_PHOTO_REMOVED:Ljava/lang/String; = "Profile Photo Removed"

.field public static final EVENT_NAME_PROFILE_USERNAME_CHANGED:Ljava/lang/String; = "Profile Username Changed"

.field public static final EVENT_NAME_SETTINGS_NETWORK_CHANGE_BEGAN:Ljava/lang/String; = "Settings Network Change Began"

.field public static final EVENT_NAME_SETTINGS_NETWORK_CHANGE_COMPLETED:Ljava/lang/String; = "Settings Network Change Completed"

.field public static final EVENT_NAME_SETTING_DISABLED:Ljava/lang/String; = "Setting Disabled"

.field public static final EVENT_NAME_SETTING_ENABLED:Ljava/lang/String; = "Setting Enabled"

.field public static final EVENT_NAME_SYNC_FAILED:Ljava/lang/String; = "Sync Failed"

.field public static final EVENT_NAME_SYNC_OBS:Ljava/lang/String; = "Sync Observation"

.field public static final EVENT_NAME_SYNC_STOPPED:Ljava/lang/String; = "Sync Stopped"

.field public static final EVENT_NAME_USER_ACTIVITY:Ljava/lang/String; = "User Activity"

.field public static final EVENT_PARAM_ALERT:Ljava/lang/String; = "Alert"

.field public static final EVENT_PARAM_ALREADY_HAD_PHOTO:Ljava/lang/String; = "AlreadyHadPhoto"

.field public static final EVENT_PARAM_ARTICLE_TITLE:Ljava/lang/String; = "ArticleTitle"

.field public static final EVENT_PARAM_CODE:Ljava/lang/String; = "code"

.field public static final EVENT_PARAM_COUNT:Ljava/lang/String; = "Count"

.field public static final EVENT_PARAM_FROM:Ljava/lang/String; = "from"

.field public static final EVENT_PARAM_FROM_VISION_SUGGESTION:Ljava/lang/String; = "owners_identification_from_vision"

.field public static final EVENT_PARAM_IS_TAXON:Ljava/lang/String; = "Is Taxon"

.field public static final EVENT_PARAM_LINK:Ljava/lang/String; = "Link"

.field public static final EVENT_PARAM_NEW_VALUE:Ljava/lang/String; = "New Value"

.field public static final EVENT_PARAM_NUM_DELETES:Ljava/lang/String; = "numDeletes"

.field public static final EVENT_PARAM_NUM_PICS:Ljava/lang/String; = "numPics"

.field public static final EVENT_PARAM_NUM_UPLOADS:Ljava/lang/String; = "numUploads"

.field public static final EVENT_PARAM_ONLINE_REACHABILITY:Ljava/lang/String; = "Online Reachability"

.field public static final EVENT_PARAM_PARENT_NAME:Ljava/lang/String; = "ParentName"

.field public static final EVENT_PARAM_PARENT_TYPE:Ljava/lang/String; = "ParentType"

.field public static final EVENT_PARAM_PARTNER:Ljava/lang/String; = "Partner"

.field public static final EVENT_PARAM_SETTING:Ljava/lang/String; = "setting"

.field public static final EVENT_PARAM_SIZE:Ljava/lang/String; = "Size"

.field public static final EVENT_PARAM_SOURCE:Ljava/lang/String; = "Source"

.field public static final EVENT_PARAM_TAXON_ID:Ljava/lang/String; = "TaxonId"

.field public static final EVENT_PARAM_VALUE_AUTO_UPLOAD:Ljava/lang/String; = "InatAutouploadPrefKey"

.field public static final EVENT_PARAM_VALUE_MEDIUM:Ljava/lang/String; = "Medium"

.field public static final EVENT_PARAM_VALUE_NO:Ljava/lang/String; = "No"

.field public static final EVENT_PARAM_VALUE_SUGGEST_SPECIES:Ljava/lang/String; = "InatSuggestSpeciesPrefKey"

.field public static final EVENT_PARAM_VALUE_YES:Ljava/lang/String; = "Yes"

.field public static final EVENT_PARAM_VIA:Ljava/lang/String; = "Via"

.field public static final EVENT_VALUE_AUTH_REQUIRED:Ljava/lang/String; = "Auth Required"

.field public static final EVENT_VALUE_AUTOMATIC_UPLOAD:Ljava/lang/String; = "Automatic Upload"

.field public static final EVENT_VALUE_CAMERA:Ljava/lang/String; = "Camera"

.field public static final EVENT_VALUE_EXPLORE_GRID:Ljava/lang/String; = "Explore Grid"

.field public static final EVENT_VALUE_EXPLORE_LIST:Ljava/lang/String; = "Explore List"

.field public static final EVENT_VALUE_EXPLORE_MAP:Ljava/lang/String; = "Explore Map"

.field public static final EVENT_VALUE_FACEBOOK:Ljava/lang/String; = "Facebook"

.field public static final EVENT_VALUE_GALLERY:Ljava/lang/String; = "Gallery"

.field public static final EVENT_VALUE_GEOPRIVACY_OBSCURED:Ljava/lang/String; = "Obscured"

.field public static final EVENT_VALUE_GEOPRIVACY_OPEN:Ljava/lang/String; = "Open"

.field public static final EVENT_VALUE_GEOPRIVACY_PRIVATE:Ljava/lang/String; = "Private"

.field public static final EVENT_VALUE_GOOGLE_PLUS:Ljava/lang/String; = "Google+"

.field public static final EVENT_VALUE_IDENTIFICATIONS_TAB:Ljava/lang/String; = "Identifications Tab"

.field public static final EVENT_VALUE_INATURALIST:Ljava/lang/String; = "iNaturalist"

.field public static final EVENT_VALUE_MANUAL_FULL_UPLOAD:Ljava/lang/String; = "Manual Full Upload"

.field public static final EVENT_VALUE_ME_TAB:Ljava/lang/String; = "Me Tab"

.field public static final EVENT_VALUE_NO_TAXON:Ljava/lang/String; = "No Taxon"

.field public static final EVENT_VALUE_PROJECT_DETAILS:Ljava/lang/String; = "Project Details"

.field public static final EVENT_VALUE_STOP_UPLOAD_BUTTON:Ljava/lang/String; = "Stop Upload Button"

.field public static final EVENT_VALUE_UNKNOWN_TAXON:Ljava/lang/String; = "Unknown"

.field public static final EVENT_VALUE_UPDATES:Ljava/lang/String; = "Updates"

.field public static final EVENT_VALUE_UPLOAD_COMPLETE:Ljava/lang/String; = "Upload Complete"

.field public static final EVENT_VALUE_VIEW_OBS_ADD:Ljava/lang/String; = "View Obs Add"

.field public static final EVENT_VALUE_VIEW_OBS_AGREE:Ljava/lang/String; = "View Obs Agree"

.field private static mAnalyticsClient:Lorg/inaturalist/android/AnalyticsClient;


# instance fields
.field private mApplication:Landroid/app/Application;

.field private mCurrentActivity:Landroid/app/Activity;


# direct methods
.method static constructor <clinit>()V
    .locals 0

    return-void
.end method

.method private constructor <init>(Landroid/app/Application;)V
    .locals 2

    .line 189
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    .line 190
    invoke-static {}, Lcom/amplitude/api/Amplitude;->getInstance()Lcom/amplitude/api/AmplitudeClient;

    move-result-object v0

    const v1, 0x7f100045

    invoke-virtual {p1, v1}, Landroid/app/Application;->getString(I)Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v0, p1, v1}, Lcom/amplitude/api/AmplitudeClient;->initialize(Landroid/content/Context;Ljava/lang/String;)Lcom/amplitude/api/AmplitudeClient;

    move-result-object v0

    invoke-virtual {v0, p1}, Lcom/amplitude/api/AmplitudeClient;->enableForegroundTracking(Landroid/app/Application;)Lcom/amplitude/api/AmplitudeClient;

    .line 192
    iput-object p1, p0, Lorg/inaturalist/android/AnalyticsClient;->mApplication:Landroid/app/Application;

    .line 194
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v1, 0xe

    if-lt v0, v1, :cond_0

    .line 196
    new-instance v0, Lorg/inaturalist/android/AnalyticsClient$1;

    invoke-direct {v0, p0}, Lorg/inaturalist/android/AnalyticsClient$1;-><init>(Lorg/inaturalist/android/AnalyticsClient;)V

    invoke-virtual {p1, v0}, Landroid/app/Application;->registerActivityLifecycleCallbacks(Landroid/app/Application$ActivityLifecycleCallbacks;)V

    :cond_0
    return-void
.end method

.method static synthetic access$002(Lorg/inaturalist/android/AnalyticsClient;Landroid/app/Activity;)Landroid/app/Activity;
    .locals 0

    .line 20
    iput-object p1, p0, Lorg/inaturalist/android/AnalyticsClient;->mCurrentActivity:Landroid/app/Activity;

    return-object p1
.end method

.method private getCurrentActivityName()Ljava/lang/String;
    .locals 2

    .line 274
    iget-object v0, p0, Lorg/inaturalist/android/AnalyticsClient;->mCurrentActivity:Landroid/app/Activity;

    invoke-virtual {v0}, Ljava/lang/Object;->getClass()Ljava/lang/Class;

    move-result-object v0

    invoke-virtual {v0}, Ljava/lang/Class;->getName()Ljava/lang/String;

    move-result-object v0

    const-string v1, "\\."

    .line 277
    invoke-virtual {v0, v1}, Ljava/lang/String;->split(Ljava/lang/String;)[Ljava/lang/String;

    move-result-object v0

    .line 278
    array-length v1, v0

    add-int/lit8 v1, v1, -0x1

    aget-object v0, v0, v1

    return-object v0
.end method

.method public static getInstance()Lorg/inaturalist/android/AnalyticsClient;
    .locals 1

    .line 241
    sget-object v0, Lorg/inaturalist/android/AnalyticsClient;->mAnalyticsClient:Lorg/inaturalist/android/AnalyticsClient;

    return-object v0
.end method

.method public static initAnalyticsClient(Landroid/app/Application;)V
    .locals 1

    .line 237
    new-instance v0, Lorg/inaturalist/android/AnalyticsClient;

    invoke-direct {v0, p0}, Lorg/inaturalist/android/AnalyticsClient;-><init>(Landroid/app/Application;)V

    sput-object v0, Lorg/inaturalist/android/AnalyticsClient;->mAnalyticsClient:Lorg/inaturalist/android/AnalyticsClient;

    return-void
.end method


# virtual methods
.method public logEvent(Ljava/lang/String;)V
    .locals 1

    .line 246
    new-instance v0, Lorg/json/JSONObject;

    invoke-direct {v0}, Lorg/json/JSONObject;-><init>()V

    invoke-virtual {p0, p1, v0}, Lorg/inaturalist/android/AnalyticsClient;->logEvent(Ljava/lang/String;Lorg/json/JSONObject;)V

    return-void
.end method

.method public logEvent(Ljava/lang/String;Lorg/json/JSONObject;)V
    .locals 2

    .line 252
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v1, 0xe

    if-ge v0, v1, :cond_0

    return-void

    .line 259
    :cond_0
    :try_start_0
    iget-object v0, p0, Lorg/inaturalist/android/AnalyticsClient;->mCurrentActivity:Landroid/app/Activity;

    if-eqz v0, :cond_1

    .line 261
    invoke-direct {p0}, Lorg/inaturalist/android/AnalyticsClient;->getCurrentActivityName()Ljava/lang/String;

    move-result-object v0

    const-string v1, "Via"

    .line 262
    invoke-virtual {p2, v1}, Lorg/json/JSONObject;->has(Ljava/lang/String;)Z

    move-result v1

    if-nez v1, :cond_1

    const-string v1, "Via"

    invoke-virtual {p2, v1, v0}, Lorg/json/JSONObject;->put(Ljava/lang/String;Ljava/lang/Object;)Lorg/json/JSONObject;

    .line 265
    :cond_1
    invoke-static {}, Lcom/amplitude/api/Amplitude;->getInstance()Lcom/amplitude/api/AmplitudeClient;

    move-result-object v0

    invoke-virtual {v0, p1, p2}, Lcom/amplitude/api/AmplitudeClient;->logEvent(Ljava/lang/String;Lorg/json/JSONObject;)V
    :try_end_0
    .catch Lorg/json/JSONException; {:try_start_0 .. :try_end_0} :catch_0

    goto :goto_0

    :catch_0
    move-exception p1

    .line 268
    invoke-virtual {p1}, Lorg/json/JSONException;->printStackTrace()V

    :goto_0
    return-void
.end method
